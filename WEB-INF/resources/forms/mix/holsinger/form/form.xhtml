<?xml version="1.0" encoding="UTF-8"?>

<html xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.w3.org/1999/xhtml http://www.w3.org/2002/08/xhtml/xhtml1-transitional.xsd
	http://www.w3.org/2002/xforms  http://www.w3.org/MarkUp/Forms/2002/XForms-Schema.xsd"
 xmlns="http://www.w3.org/1999/xhtml"
 xmlns:xxi="http://orbeon.org/oxf/xml/xinclude"
 xmlns:ev="http://www.w3.org/2001/xml-events"
 xmlns:xi="http://www.w3.org/2001/XInclude"
 xmlns:xforms="http://www.w3.org/2002/xforms"
 xmlns:xhtml="http://www.w3.org/1999/xhtml"
 xmlns:xlink="http://www.w3.org/1999/xlink"
 xmlns:dl="http://dl.lib.brown.edu/editor/mods/dl"
 xmlns:fr="http://orbeon.org/oxf/xml/form-runner"
 xmlns:xs="http://www.w3.org/2001/XMLSchema"
 xmlns:mix="http://www.loc.gov/mix/v20"
 xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
xmlns:eaditor="yyyy">
	<head>

 <xi:include href="oxf:/forms/mods/africanMaps/xbl/subject.xbl" 
xxi:omit-xml-base="true"/>

		<title>MIX Editor</title>

		<!-- CSS -->
		<xforms:model id="fr-form-model" xxforms:help-tooltip="false">
			
			<!-- Handy Brown date schema. -->
			<xi:include href="oxf:/forms/mods/schema.xsd" xxi:omit-xml-base="true"/>

			<!-- MODS schema -->
			<xi:include href="oxf:/forms/mix/mix20.xsd" xxi:omit-xml-base="true"/>


			<!-- This is the default basic skeleton for your form. Any nodes you want to be present, or
				default values, add to this xml file. -->
			<xforms:instance id="fr-form-instance" xxforms:validation="lax">
				<xi:include href="oxf:/forms/mix/holsinger/template.xml" xxi:omit-xml-base="true"/>
			</xforms:instance>


			<!--  Insert Instance -->
			<xforms:instance id="mix-insert" src="oxf:/forms/mix/holsinger/mix-insert.xml"/>



			
			<!-- Import MODS service -->
			<xforms:instance id="import-instance">
				<query type="catkey" xmlns:mix="http://www.loc.gov/mix/v20"/>
			</xforms:instance>

			<!--  Instance to control button triggers -->
			<xforms:instance id="triggers-instance">
				<control xmlns="">
					<buttons-triggers/>
				</control>
			</xforms:instance>

			<xforms:bind nodeset="instance('triggers-instance')">
				<xforms:bind id="buttons-triggers"
					readonly="xxforms:instance('fr-parameters-instance')/mode != 'new' and xxforms:instance('fr-parameters-instance')/mode != 'edit' "
				/>
			</xforms:bind>

			<!-- Form Binds -->
			<!-- This is where you really define what your controller which is applied to your xml record. 
				For example, if you want a field to only contain dates, you would bind that xml node to a date-specific 
				definition. Or if a field is required to make the document valid, you define that here. XML nodes don't 
				specificly need a bind to be in the model ... they will just default to a open text box. 
				
				Here are some examples: (from MODS)
				<xforms:bind id="fr-form-binds" nodeset="."> 
				(require field)   <xforms:bind id="identifier-bind" nodeset="mods:identifier" required="true()"/>
				(readonly/uneditable field) <xforms:bind id="suri-bind" nodeset="mods:identifier[@displayLabel='SU DRUID']" readonly="true()"/>
				(bound to the Brown schema date defination) <xforms:bind nodeset="mods:originInfo/mods:copyrightDate" type="dl:date"/>
				</xforms:bind>
			-->

			<xforms:bind id="fr-form-binds" nodeset=".">

				<xforms:bind id="identifier-bind" nodeset="/mix:mix/mix:ObjectIdentifier" required="true()"/>
				<xforms:bind id="identifier-type" nodeset="/mix:mix/mix:ObjectIdentifier/mix:objectIdentifierType" required="true()"/>
	
				

			</xforms:bind>


			<!-- Be sure to put the following AFTER the fr-form-binds section. -->
			<!-- Application Metadata -->
			<xforms:instance id="fr-form-metadata" xxforms:readonly="true">
				<metadata xmlns="">
					<application-name>mix</application-name>
					<form-name>MIX</form-name>
					<title 
xml:lang="en">Basic MIX</title>
					<description xml:lang="en">MIX Metadata Toolkit</description>
					<title xml:lang="fr">MIX Metadata Toolkit</title>
					<author>University of Virginia Library</author>
					<logo mediatype="image/png" filename="banner.gif" size=""
						>/apps/fr/style/banner.gif</logo>

					<logo mediatype="" filename="" size=""/>
				</metadata>
			</xforms:instance>



			<xforms:instance id="fr-form-attachments">
				<attachments xmlns="">
					<css mediatype="text/css" filename="" size=""/>
					<!-- Fix this once we have proper template -->
					<!--<pdf mediatype="application/pdf" filename="template.pdf" size="8638">/fr/service/resource/crud/orbeon/bookcast/form/template.pdf</pdf>-->
					<pdf mediatype="application/pdf" filename="" size=""/>
				</attachments>
			</xforms:instance>

			<!-- XForms instance containing all the language resources -->
			<!-- This form does not use these values much and instead hardcodes most of 
				the values into the form. However, a few values were added to the resources.xml
				for form running to properly function -->
			<xforms:instance id="fr-form-resources">
				<xi:include href="oxf:/forms/mix/holsinger/form/resources.xml"
					xxi:omit-xml-base="true"/>
			</xforms:instance>

		</xforms:model>
		<style type="text/css">
            <!-- To prevent the first grid to become too tall -->
          <!--  #image-output-control.xforms-mediatype-image { max-height: 200px } -->
        </style>
	</head>
	<!-- Now we start the "view" of the form -->
	<body>
		<!-- Form Runner uses it's own tags that are prefixes with "fr". It's complicated, but its mostly just a wrapper.
			Replace the html tables with the fr:grid and add fr: prefix to your td's and tr's -->
		<fr:view>
			<xforms:label>MIX Metadata Toolkit</xforms:label>
			<xhtml:img src="http://search.lib.virginia.edu/images/uva_lib_logo.png"/>
			<fr:body>

				<!-- XFORMS Repeats have a hard-time showing up in the summary table. This section exposes values to be populated in the 
				form's summary table -->
				
				<div style="display:none">
					<xforms:input class="fr-summary fr-search fr-email-subject"
						ref="/mix:mix/mix:ObjectIdentifier[mix:objectIdentifierType='pid']/mix:objectIdentifierValue">
						<xforms:label>Pid:</xforms:label>
					</xforms:input>
				</div>

				<xi:include href="oxf:/forms/mix/partials/BasicDigitalObjectInformation_partial.xml" xxi:omit-xml-base="true"/>
				<xi:include href="oxf:/forms/mix/partials/BasicImageInformation_partial.xml" xxi:omit-xml-base="true"/>				
			<!--
				<xi:include href="oxf:/forms/mix/partials/ImageAssessmentMetadata_partial.xml" xxi:omit-xml-base="true"/>
		-->
			</fr:body>
		</fr:view>
	</body>



</html>
